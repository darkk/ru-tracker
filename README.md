# ru-tracker

Клиент для API tracking.pochta.ru с поддержкой "докачки" информации.

Требуется:
- Python-2.7
- `requests` (тестировалось на 2.9.1): `apt-get instlal python-requests`
- `progressbar` (тестировалось на 2.3): `apt-get install python-progressbar`

Запускать как `python ru-tracker.py rpo.txt >parsed.csv`.

## Q&A

### Почему не используется `suds` для хождения в SOAP API?

Что-то где-то с WSDL не в порядке и `suds` не может составить запрос для
`getOperationHistory`, а у `getResponseByTicket` не может распарсить ответ.
Проще сделать вручную, чем `suds` чинить.

### Почему не используется максимальный размер пачки треков в 3000?

При попытке забрать данные о пачке такого размера nginx Почты России рвёт
соединение. Такое бывает, например, когда ответ не помещается в буфера в
оперативной памяти и его необходимо сохранить на диск, а директория не доступна
для записи для программы nginx. В чём истинная причина такого поведения сервиса
Почты России – неизвестно.

### Почему такой странный формат вывода в псевдо-CSV?

Для интеграции с существующей информационной системой ЦАФАП ОДД ГИБДД УМВД РФ
по Омской обл. вместо нестабильно работающего TrackChecker.
